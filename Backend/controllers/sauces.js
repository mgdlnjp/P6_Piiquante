const sauces = require('../models/sauces');


exports.createSauces = (req, res, next) => {
  const saucesObject = JSON.parse(req.body.sauce);
  delete saucesObject._id;
  delete saucesObject._userId;
  const sauces = new sauces({
      ...saucesObject,
      userId: req.auth.userId,
      imageUrl: `${req.protocol}://${req.get('host')}/images/${req.file.filename}`,
      likes: 0,
      dislikes: 0,
      usersLiked: [" "],
      usersdisLiked: [" "],
  });

  sauces.save()
  .then(() => { res.status(201).json({message: 'Objet enregistrÃ© !'})})
  .catch(error => { res.status(400).json( { error })})
};

exports.getAllSauces = (req, res, next) => {
    //console.log("toto")
    sauces.find().then(
      (sauces) => {
        res.status(200).json(sauces);
      }
    ).catch(
      (error) => {
        res.status(400).json({
          error: error
        });
      }
    );
  };